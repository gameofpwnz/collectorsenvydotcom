<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Archive | Collectors Envy Museum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;700&display=swap');
        
        body { background-color: #050505; color: #d1d5db; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .serif { font-family: 'Cormorant Garamond', serif; }

        .museum-bg {
            background: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #050505 100%);
            background-attachment: fixed;
        }

        .display-case {
            background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .display-case:hover {
            border-color: #3b82f6;
            transform: translateY(-8px);
        }

        .curator-choice { border-color: #c5a059 !important; box-shadow: 0 0 40px rgba(197, 160, 89, 0.15); }
        .curator-badge { background: #c5a059; color: black; font-size: 7px; padding: 2px 8px; letter-spacing: 0.2em; font-weight: 900; }
        .verified-badge { background: rgba(59, 130, 246, 0.1); border: 1px solid #3b82f6; color: #3b82f6; font-size: 8px; padding: 2px 8px; letter-spacing: 0.1em; font-weight: 800; }
        
        .era-btn.active { color: #3b82f6; border-color: #3b82f6; }
        .filter-btn.active { color: #3b82f6; border-bottom: 2px solid #3b82f6; }

        .hall-label { writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg); font-size: 0.65rem; letter-spacing: 0.5em; }
        @media (max-width: 768px) { .hall-label { display: none; } }

        .modal-close-trigger { position: fixed; top: 1.5rem; right: 1.5rem; z-index: 150; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .coa-card { background: linear-gradient(145deg, #111, #080808); border: 1px solid #c5a059; position: relative; overflow: hidden; }
        .coa-card::after { content: "VERIFIED"; position: absolute; top: 10px; right: -30px; background: #c5a059; color: black; font-size: 8px; font-weight: 900; padding: 5px 40px; transform: rotate(45deg); }
        
        #backToTop { display: none; position: fixed; bottom: 2rem; right: 2rem; z-index: 60; background: rgba(59, 130, 246, 0.2); backdrop-filter: blur(10px); border: 1px solid rgba(59, 130, 246, 0.5); }
        .placeholder-shimmer { background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(59, 130, 246, 0.05) 50%, rgba(255,255,255,0) 100%); background-size: 200% 100%; animation: shimmer 3s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 100; overflow-y: auto; align-items: flex-start; justify-content: center; }
        .related-card { background: #0a0a0a; border: 1px solid rgba(255,255,255,0.05); transition: all 0.3s ease; }
        .related-card:hover { border-color: #3b82f6; }
    </style>
</head>
<body class="antialiased museum-bg">

    <nav class="fixed w-full z-50 px-6 md:px-10 py-4 md:py-6 flex justify-between items-center bg-black/80 backdrop-blur-md border-b border-white/5">
        <div class="flex flex-col leading-none">
            <span class="text-[8px] md:text-[9px] tracking-[0.3em] font-bold text-zinc-500 uppercase italic">Museum of</span>
            <span class="text-xl font-black uppercase italic tracking-tighter text-white">ESPORTS COLLECTORS</span>
        </div>
        <a href="https://forms.gle/hrbaadeGTpLCaeYj7" target="_blank" class="px-4 py-2 border border-blue-500/50 text-blue-500 text-[9px] uppercase tracking-widest font-bold hover:bg-blue-500 hover:text-white transition-all">Submit Artifact</a>
    </nav>

    <header class="relative min-h-screen flex flex-col justify-center items-center text-center px-6 pb-20 overflow-hidden">
        <div class="absolute inset-0 z-0 opacity-20 grayscale bg-[url('https://lh3.googleusercontent.com/d/1YUsyR_rYlyOA7HnPvrEHExFwL25cs9DX=w1000-h1000')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-[#050505]/70 to-[#050505]"></div>
        <div class="relative z-10 mt-20">
            <div class="w-px h-20 bg-gradient-to-b from-blue-500 to-transparent mx-auto mb-8"></div>
            <h2 class="text-zinc-500 uppercase tracking-[0.4em] text-[10px] mb-4 font-bold italic">Permanent Installation</h2>
            <h1 class="serif text-5xl md:text-9xl text-white italic mb-10 leading-tight tracking-tight">Preserving the <br>Physical Legacy.</h1>
        </div>
    </header>

    <div class="sticky top-[70px] md:top-[80px] z-40 bg-black/95 backdrop-blur-md border-y border-white/5 py-4">
        <div class="max-w-7xl mx-auto px-6 flex flex-col gap-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="relative w-full md:w-96">
                    <input type="text" id="museumSearch" onkeyup="handleSearch()" placeholder="Search archives..." class="w-full bg-zinc-900 border border-zinc-800 px-6 py-3 text-xs text-zinc-300 focus:outline-none focus:border-blue-500 transition uppercase tracking-widest">
                    <div class="absolute right-4 top-1/2 -translate-y-1/2 text-[9px] font-bold text-zinc-600 uppercase">
                        <span id="artifactCount" class="text-blue-500">0</span> Records
                    </div>
                </div>
                <div id="esportFilters" class="flex gap-6 overflow-x-auto w-full md:w-auto scrollbar-hide">
                    <button onclick="filterByEsport('all')" class="filter-btn active text-[10px] uppercase tracking-widest font-bold text-zinc-500">All</button>
                    <button onclick="filterByEsport('cod')" class="filter-btn text-[10px] uppercase tracking-widest font-bold text-zinc-500">CoD</button>
                    <button onclick="filterByEsport('halo')" class="filter-btn text-[10px] uppercase tracking-widest font-bold text-zinc-500">Halo</button>
                    <button onclick="filterByEsport('creator')" class="filter-btn text-[10px] uppercase tracking-widest font-bold text-zinc-500">Creator</button>
                </div>
            </div>
            <div class="flex gap-6 justify-center items-center text-[8px] uppercase tracking-[0.3em] font-bold text-zinc-600 border-t border-white/5 pt-4">
                <button onclick="filterByEra('all')" class="era-btn active">All Eras</button>
                <button onclick="filterByEra('golden')" class="era-btn">Golden Age (10-15)</button>
                <button onclick="filterByEra('global')" class="era-btn">Global Era (16-20)</button>
                <button onclick="filterByEra('modern')" class="era-btn">Modern (21+)</button>
            </div>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-6 py-20">
        <section id="curator-spotlight" class="relative pt-20 pb-10 mb-20">
            <div class="flex items-center gap-4 mb-12">
                <div class="h-px flex-1 bg-gradient-to-r from-transparent to-zinc-800"></div>
                <h2 class="serif text-2xl text-[#c5a059] italic tracking-widest uppercase">Curator's Choice</h2>
                <div class="h-px flex-1 bg-gradient-to-l from-transparent to-zinc-800"></div>
            </div>
            <div id="featured-grid" class="grid grid-cols-1 md:grid-cols-2 gap-12"></div>
        </section>

        <div id="globalEmptyState" class="hidden py-40 text-center">
            <h3 class="serif text-4xl text-zinc-700 italic mb-4">Exhibit Awaiting Contributions</h3>
            <p class="text-zinc-500 text-xs uppercase tracking-widest italic">No records match your inquiry.</p>
        </div>

        <section id="hall-jerseys" class="relative px-0 md:pl-20 mb-40">
            <div class="hall-label absolute left-0 top-0 h-full hidden md:flex items-center text-zinc-800 border-r border-zinc-900 pr-4 italic font-black uppercase">Hall of Textiles</div>
            <h2 class="serif text-3xl md:text-5xl text-white italic mb-12 border-b border-zinc-900 pb-6">Jersey Collection</h2>
            <div id="jerseys-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 italic"></div>
        </section>

        <section id="hall-hardware" class="relative px-0 md:pl-20 mb-40">
            <div class="hall-label absolute left-0 top-0 h-full hidden md:flex items-center text-zinc-800 border-r border-zinc-900 pr-4 italic font-black uppercase">Hardware Wing</div>
            <h2 class="serif text-3xl md:text-5xl text-white italic mb-12 border-b border-zinc-900 pb-6">Hardware & Memorabilia</h2>
            <div id="hardware-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 italic"></div>
        </section>

        <section id="hall-signatures" class="relative px-0 md:pl-20 mb-40">
            <div class="hall-label absolute left-0 top-0 h-full hidden md:flex items-center text-zinc-800 border-r border-zinc-900 pr-4 italic font-black uppercase">Signature Study</div>
            <h2 class="serif text-3xl md:text-5xl text-white italic mb-12 border-b border-zinc-900 pb-6">Autographs & Inscriptions</h2>
            <div id="signatures-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 italic"></div>
        </section>

        <section class="border-t border-white/5 pt-40 pb-20 text-center">
            <div class="max-w-4xl mx-auto">
                <div class="w-px h-16 bg-blue-500/50 mx-auto mb-10"></div>
                <h2 class="serif text-4xl text-white italic mb-8">The Mission</h2>
                <p class="text-zinc-400 font-light leading-relaxed text-lg italic mb-32 px-4 italic leading-relaxed">"In an era defined by digital ephemerality, the physical relics of competition serve as the anchor for our shared history. We exist to ensure that the textiles, hardware, and signatures of the pioneers are never lost to timeâ€”preserving the tangible soul of esports for the next generation."</p>
                <h3 class="serif text-3xl text-white italic mb-4">Patrons of the Archive</h3>
                <div id="donor-wall" class="grid grid-cols-2 md:grid-cols-4 gap-y-12 gap-x-8 mt-16 px-4"></div>
            </div>
        </section>
    </main>

    <div id="itemModal" class="modal">
        <button onclick="closeModal()" class="modal-close-trigger flex items-center gap-2 px-4 py-2 rounded-full transition"><span class="text-[10px] font-bold uppercase tracking-widest text-white italic">Exit Gallery</span></button>
        <div class="w-full max-w-5xl px-6 py-24" onclick="event.stopPropagation()">
            <div id="modalImages" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-12"></div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12" id="modalDetailsArea">
                <div class="lg:col-span-2 border-l-2 border-blue-600 pl-8 text-left">
                    <h2 id="modalTitle" class="serif text-4xl md:text-6xl text-white italic mb-4 leading-none uppercase tracking-tighter"></h2>
                    <div id="modalAcc" class="text-blue-500 font-mono text-[10px] uppercase tracking-widest mb-6"></div>
                    <p id="modalDesc" class="text-zinc-400 font-light text-base md:text-lg mb-10 italic leading-relaxed"></p>
                    <button onclick="shareArtifact()" class="bg-blue-600/10 border border-blue-500/50 px-6 py-3 text-blue-400 text-[10px] font-bold uppercase tracking-widest hover:bg-blue-600 hover:text-white transition">Copy Exhibit Link</button>
                </div>
                <div class="coa-card p-6 flex flex-col justify-between min-h-[200px] text-left">
                    <div class="text-[9px] uppercase tracking-[0.3em] text-zinc-500 font-bold italic">Registry Record</div>
                    <div><div class="text-[8px] uppercase text-[#c5a059] font-bold tracking-widest mb-1 italic">Steward</div><div id="modalSteward" class="text-white font-bold text-xl italic tracking-tighter"></div></div>
                    <div class="mt-6 pt-4 border-t border-zinc-800 text-[8px] uppercase text-zinc-600 tracking-widest font-bold">Official Archive Record</div>
                </div>
            </div>
        </div>
    </div>

    <button id="backToTop" onclick="scrollToTop()" class="p-4 rounded-full text-white shadow-2xl transition-all"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 15l-6-6-6 6"/></svg></button>
    <div id="shareToast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-blue-600 text-white px-8 py-4 rounded-full text-xs font-bold uppercase tracking-widest opacity-0 pointer-events-none z-[200] transition-all">Link Copied</div>

    <script>
        let currentArtifactId = "";
        let activeEsport = "all";
        let activeEra = "all";

        async function initMuseum() {
            try {
                const response = await fetch('/assets/museum-data.json');
                const data = await response.json();
                window.museumData = data;
                renderItems(data);
                renderPatrons(data);
                const hash = window.location.hash.substring(1);
                if (hash) setTimeout(() => openModal(hash), 500);
            } catch (e) { console.error("Archive Error: museum-data.json not found."); }
        }

        function handleSearch() {
            const query = document.getElementById('museumSearch').value.toLowerCase();
            const filtered = window.museumData.filter(item => {
                const searchableFields = [
                    item.id,
                    item.esport,
                    item.title,
                    item.steward,
                    item.description,
                    ...(item.tags || [])
                ];
                const matchesSearch = searchableFields.some(field => String(field).toLowerCase().includes(query));
                const matchesEsport = activeEsport === 'all' || item.esport === activeEsport;
                let matchesEra = true;
                if (activeEra === 'golden') matchesEra = item.year <= 2015;
                else if (activeEra === 'global') matchesEra = item.year > 2015 && item.year <= 2020;
                else if (activeEra === 'modern') matchesEra = item.year > 2020;
                return matchesSearch && matchesEsport && matchesEra;
            });
            renderItems(filtered);
        }

        function filterByEsport(esport) {
            activeEsport = esport;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('text-blue-500', 'active'));
            event.target.classList.add('text-blue-500', 'active');
            handleSearch();
        }

        function filterByEra(era) {
            activeEra = era;
            document.querySelectorAll('.era-btn').forEach(btn => btn.classList.remove('active', 'text-blue-500'));
            event.target.classList.add('active', 'text-blue-500');
            handleSearch();
        }

        function renderItems(data) {
            document.getElementById('artifactCount').innerText = data.length;
            document.getElementById('globalEmptyState').classList.toggle('hidden', data.length > 0 || document.getElementById('museumSearch').value === "");
            
            // Handle Curator's Choice Grid
            const featuredItems = data.filter(item => item.featured === true);
            const featuredGrid = document.getElementById('featured-grid');
            document.getElementById('curator-spotlight').style.display = featuredItems.length > 0 ? 'block' : 'none';
            
            featuredGrid.innerHTML = featuredItems.map(item => `
                <div class="display-case p-8 curator-choice group cursor-pointer flex flex-col md:flex-row gap-8 items-center" onclick="openModal('${item.id}')">
                    <div class="w-full md:w-1/2 aspect-square bg-black overflow-hidden relative">
                        <img src="${item.images[0]}" class="w-full h-full object-contain opacity-90 group-hover:scale-105 transition-transform duration-1000">
                        <div class="absolute top-0 left-0 curator-badge">ESSENTIAL RECORD</div>
                    </div>
                    <div class="w-full md:w-1/2 text-left">
                        <span class="text-[#c5a059] font-mono text-[10px] uppercase tracking-[0.3em] mb-4 block">${item.id}</span>
                        <h3 class="serif text-4xl text-white italic mb-6 leading-tight">${item.title}</h3>
                        <p class="text-zinc-500 text-sm italic font-light leading-relaxed mb-8 line-clamp-3">${item.description}</p>
                        <div class="text-[9px] text-zinc-400 uppercase tracking-widest font-bold border-t border-zinc-800 pt-4">
                            Steward: <span class="text-white">${item.steward}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            // Handle Standard Halls
            const categories = ['jerseys', 'hardware', 'signatures'];
            categories.forEach(cat => {
                const grid = document.getElementById(`${cat}-grid`);
                const items = data.filter(item => item.category === cat);
                grid.innerHTML = items.map(item => `
                    <div class="display-case p-6 flex flex-col group cursor-pointer ${item.featured ? 'curator-choice' : ''}" onclick="openModal('${item.id}')">
                        <div class="aspect-[4/5] bg-black mb-6 overflow-hidden relative shadow-inner">
                            <img src="${item.images[0]}" loading="lazy" class="w-full h-full object-contain opacity-80 group-hover:opacity-100 transition-all duration-700">
                            ${item.featured ? '<div class="absolute top-0 left-0 curator-badge">CURATOR\'S CHOICE</div>' : ''}
                        </div>
                        <div class="mt-auto text-left">
                            <div class="flex justify-between items-baseline mb-2 italic">
                                <span class="text-[9px] font-bold ${item.featured ? 'text-[#c5a059]' : 'text-blue-600'} uppercase tracking-widest">${item.id}</span>
                                <span class="text-[8px] text-zinc-700 font-bold uppercase font-mono">${item.year}</span>
                            </div>
                            <h4 class="serif text-2xl text-white italic leading-none mb-4 uppercase tracking-tighter">${item.title}</h4>
                            <div class="flex justify-between items-center pt-4 border-t border-zinc-900 text-[10px] uppercase font-bold tracking-tighter">
                                <span class="text-zinc-600 italic">Steward</span>
                                <span class="text-zinc-400 italic">${item.steward}</span>
                            </div>
                        </div>
                    </div>`).join('') + `
                    <div class="display-case p-8 placeholder-shimmer flex flex-col items-center justify-center text-center group h-full border-dashed border-zinc-800 min-h-[400px]">
                        <div class="mb-6 opacity-20"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="1"><path d="M21 8l-9-4-9 4v8l9 4 9-4V8z"></path></svg></div>
                        <h4 class="serif text-xl text-zinc-600 italic mb-4 uppercase tracking-tighter">Exhibit Awaiting Contributions</h4>
                        <a href="https://forms.gle/hrbaadeGTpLCaeYj7" target="_blank" class="text-[9px] text-blue-500 uppercase font-bold tracking-widest border-b border-blue-500 pb-1">Submit Artifact</a>
                    </div>`;
            });
        }

        function renderPatrons(data) {
            const uniqueStewards = [...new Set(data.map(item => item.steward))];
            document.getElementById('donor-wall').innerHTML = uniqueStewards.map(steward => {
                const info = data.find(i => i.steward === steward);
                return `<div class="group"><a href="${info.stewardLink || '#'}" target="_blank" class="block">
                    <span class="block text-zinc-400 group-hover:text-blue-500 text-[11px] uppercase tracking-widest font-bold mb-1">${steward}</span>
                    <span class="block text-[7px] text-zinc-700 uppercase tracking-widest font-black italic">Verified Steward</span>
                </a></div>`;
            }).join('');
        }

        function openModal(id) {
            currentArtifactId = id;
            const item = window.museumData.find(a => a.id === id);
            if(!item) return;
            document.getElementById('modalTitle').innerText = item.title;
            document.getElementById('modalDesc').innerText = item.description;
            document.getElementById('modalAcc').innerHTML = `Accession No. ${item.id} ${item.verified ? '<span class="verified-badge ml-2 inline-block">REGISTRY CERTIFIED</span>' : ''}`;
            document.getElementById('modalSteward').innerText = item.steward;
            document.getElementById('modalImages').innerHTML = item.images.slice(0, 4).map(img => `<div class="bg-black p-2 border border-white/5 shadow-2xl"><img src="${img}" class="w-full h-auto object-contain"></div>`).join('');
            
            const related = window.museumData.filter(o => o.id !== item.id && (o.esport === item.esport || (o.tags && item.tags && o.tags.some(t => item.tags.includes(t))))).slice(0, 4);
            const detailCol = document.querySelector('.lg:col-span-2');
            const existingRel = document.getElementById('relatedExhibits');
            if(existingRel) existingRel.remove();
            
            if(related.length > 0) {
                const relDiv = document.createElement('div');
                relDiv.id = "relatedExhibits";
                relDiv.className = "mt-20 pt-10 border-t border-white/5";
                relDiv.innerHTML = `<h4 class="serif text-xl text-white italic mb-6">Related Exhibits</h4><div class="grid grid-cols-2 md:grid-cols-4 gap-4">${related.map(r => `
                    <div onclick="openModal('${r.id}')" class="related-card p-3 cursor-pointer group text-left">
                        <img src="${r.images[0]}" class="w-full h-24 object-contain opacity-50 group-hover:opacity-100 transition mb-2">
                        <div class="text-[10px] text-zinc-300 font-bold uppercase truncate">${r.title}</div>
                    </div>`).join('')}</div>`;
                detailCol.appendChild(relDiv);
            }

            document.getElementById('itemModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            window.history.replaceState(null, null, "#" + id);
        }

        function closeModal() { document.getElementById('itemModal').style.display = 'none'; document.body.style.overflow = 'auto'; window.history.replaceState(null, null, window.location.pathname); }
        function shareArtifact() { navigator.clipboard.writeText(window.location.origin + window.location.pathname + "#" + currentArtifactId).then(() => { const toast = document.getElementById('shareToast'); toast.style.opacity = "1"; setTimeout(() => { toast.style.opacity = "0"; }, 2000); }); }
        function scrollToTop() { window.scrollTo({top: 0, behavior: 'smooth'}); }
        window.onscroll = function() { document.getElementById("backToTop").style.display = (window.scrollY > 500) ? "block" : "none"; };
        initMuseum();
    </script>
</body>
</html>
